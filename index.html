<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ca√ßa-Palavras Tutyxs 2.0</title>
  <style>
    body {
      background: #1a1a1a;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }

    h1, h2 {
      font-size: 2rem;
      margin: 1rem 0;
    }

    button {
      padding: 15px 25px;
      margin: 10px;
      font-size: 1.2rem;
      border: none;
      border-radius: 10px;
      background: #6200ea;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background: #3700b3;
    }

    .hidden {
      display: none;
    }

    .word-section {
      margin-top: 10px;
    }

    .word-section h3 {
      font-size: 1.5rem;
      margin-bottom: 5px;
    }

    .word-list {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .word-list span {
      background: #444;
      padding: 5px 10px;
      border-radius: 5px;
    }

    .word-list .found {
      text-decoration: line-through;
      color: #aaa;
    }

    .grid {
      display: grid;
      gap: 6px;
      justify-content: center;
      background-color: #2c2c2c;
      padding: 15px;
      margin: 30px auto 0;
      width: fit-content;
    }

    .cell {
      width: 42px;
      height: 42px;
      background: #444;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      border-radius: 5px;
      user-select: none;
    }

    .selected {
      background-color: #240046;
    }

    .correct {
      background-color: #000080;
    }

    .music-toggle {
      position: fixed;
      top: 10px;
      right: 10px;
      background: #333;
      padding: 8px 12px;
      font-size: 1.3rem;
    }

    #backBtn {
      margin-top: 20px;
    }
  </style>
</head>
<body>

  <h1 id="welcome">Bem-vindo ao Ca√ßa-Palavras do Tutyxs 2.0</h1>
  <button id="startBtn">Come√ßar Jogo</button>

  <div id="difficulty" class="hidden">
    <h2>Escolha a Dificuldade</h2>
    <button onclick="setDifficulty('facil')">F√°cil</button>
    <button onclick="setDifficulty('medio')">M√©dio</button>
    <button onclick="setDifficulty('dificil')">Dif√≠cil</button>
  </div>

  <div id="themes" class="hidden">
    <h2>Escolha o Tema</h2>
    <div style="overflow-x:auto; white-space:nowrap;">
      <button onclick="startGame('Tecnologia')">Tecnologia</button>
      <button onclick="startGame('Animais')">Animais</button>
      <button onclick="startGame('Escola')">Escola</button>
      <button onclick="startGame('Frutas')">Frutas</button>
      <button onclick="startGame('Espa√ßo')">Espa√ßo</button>
    </div>
  </div>

  <div id="gameArea" class="hidden">
    <div class="word-section">
      <h3>Palavras para encontrar</h3>
      <div class="word-list" id="wordList"></div>
    </div>
    <div id="grid" class="grid"></div>
    <button id="backBtn" onclick="location.reload()">Voltar ao In√≠cio</button>
  </div>

  <button class="music-toggle" onclick="toggleMusic()">üéµ</button>

  <audio id="music" src="1-party-anthem.mp3" loop></audio>
  <audio id="success" src="success.mp3"></audio>
  <audio id="fail" src="fail.mp3"></audio>

  <script>
    const wordsByTheme = {
      'Tecnologia': ['APP', 'CLOUD', 'JAVA', 'HTML', 'LINUX', 'SENHA', 'ROBOT', 'WI-FI', 'DADOS', 'CODIGO'],
      'Animais': ['GATO', 'C√ÉO', 'TIGRE', 'PANDA', 'CAVALO', 'RATO', 'CISNE', 'URSO', 'ZEBRA', 'FOCA'],
      'Escola': ['LIVRO', 'L√ÅPIS', 'PROVA', 'RECREIO', 'LI√á√ÉO', 'MESA', 'QUADRO', 'TEXTO', 'AULA', 'NOTA'],
      'Frutas': ['UVA', 'P√äRA', 'BANANA', 'MA√á√É', 'KIWI', 'LIM√ÉO', 'COCO', 'FIGO', 'AMEIXA', 'JABUTI'],
      'Espa√ßo': ['SOL', 'LUZ', 'TERRA', 'SATURNO', 'ASTRO', 'VIA', 'NEBULOSA', 'ROVER', 'NASA', 'F√ìTON']
    };

    const startBtn = document.getElementById('startBtn');
    const welcome = document.getElementById('welcome');
    const difficultyDiv = document.getElementById('difficulty');
    const themesDiv = document.getElementById('themes');
    const gameArea = document.getElementById('gameArea');
    const wordListDiv = document.getElementById('wordList');
    const gridDiv = document.getElementById('grid');
    const music = document.getElementById('music');
    const success = document.getElementById('success');
    const fail = document.getElementById('fail');

    let selectedCells = [];
    let grid = [];
    let selectedWords = [];
    let foundWords = [];
    let gridSize = 10;

    startBtn.onclick = () => {
      startBtn.classList.add('hidden');
      welcome.classList.add('hidden');
      difficultyDiv.classList.remove('hidden');
    };

    function setDifficulty(level) {
      difficultyDiv.classList.add('hidden');
      themesDiv.classList.remove('hidden');
      if (level === 'facil') gridSize = 6, wordCount = 4;
      else if (level === 'medio') gridSize = 8, wordCount = 7;
      else gridSize = 10, wordCount = 10;
    }

    function startGame(theme) {
      themesDiv.classList.add('hidden');
      gameArea.classList.remove('hidden');
      selectedWords = wordsByTheme[theme].slice(0, wordCount);
      createGrid();
      music.play();
    }

    function createGrid() {
      grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(''));
      wordListDiv.innerHTML = '';
      selectedWords.forEach(word => {
        placeWord(word.toUpperCase());
        const span = document.createElement('span');
        span.textContent = word;
        span.id = 'word-' + word;
        wordListDiv.appendChild(span);
      });
      fillEmpty();
      renderGrid();
    }

    function placeWord(word) {
      let placed = false;
      while (!placed) {
        const vertical = Math.random() < 0.5;
        const row = Math.floor(Math.random() * (vertical ? gridSize - word.length : gridSize));
        const col = Math.floor(Math.random() * (vertical ? gridSize : gridSize - word.length));
        let canPlace = true;
        for (let i = 0; i < word.length; i++) {
          const r = vertical ? row + i : row;
          const c = vertical ? col : col + i;
          if (grid[r][c] && grid[r][c] !== word[i]) {
            canPlace = false;
            break;
          }
        }
        if (canPlace) {
          for (let i = 0; i < word.length; i++) {
            const r = vertical ? row + i : row;
            const c = vertical ? col : col + i;
            grid[r][c] = word[i];
          }
          placed = true;
        }
      }
    }

    function fillEmpty() {
      const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      for (let r = 0; r < gridSize; r++) {
        for (let c = 0; c < gridSize; c++) {
          if (!grid[r][c]) {
            grid[r][c] = letters[Math.floor(Math.random() * letters.length)];
          }
        }
      }
    }

    function renderGrid() {
      gridDiv.innerHTML = '';
      gridDiv.style.gridTemplateColumns = `repeat(${gridSize}, 42px)`;
      grid.forEach((row, r) => {
        row.forEach((letter, c) => {
          const cell = document.createElement('div');
          cell.className = 'cell';
          cell.textContent = letter;
          cell.dataset.row = r;
          cell.dataset.col = c;
          cell.ontouchstart = selectStart;
          cell.ontouchmove = selectMove;
          cell.ontouchend = selectEnd;
          gridDiv.appendChild(cell);
        });
      });
    }

    function getCell(row, col) {
      return document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
    }

    function selectStart(e) {
      selectedCells = [];
      handleTouch(e);
    }

    function selectMove(e) {
      handleTouch(e);
    }

    function handleTouch(e) {
      const touch = e.touches[0];
      const target = document.elementFromPoint(touch.clientX, touch.clientY);
      if (target && target.classList.contains('cell')) {
        const r = +target.dataset.row;
        const c = +target.dataset.col;
        const key = `${r}-${c}`;
        if (!selectedCells.find(cell => cell.key === key)) {
          selectedCells.push({ r, c, key, el: target });
          target.classList.add('selected');
        }
      }
    }

    function selectEnd() {
      const word = selectedCells.map(c => grid[c.r][c.c]).join('');
      const reversed = word.split('').reverse().join('');
      const match = selectedWords.find(w => w === word || w === reversed);
      if (match) {
        selectedCells.forEach(c => c.el.classList.replace('selected', 'correct'));
        document.getElementById('word-' + match).classList.add('found');
        foundWords.push(match);
        success.play();
        if (foundWords.length === selectedWords.length) {
          alert("Parab√©ns! Voc√™ encontrou todas as palavras!");
        }
      } else {
        selectedCells.forEach(c => c.el.classList.remove('selected'));
        fail.play();
      }
      selectedCells = [];
    }

    function toggleMusic() {
      music.paused ? music.play() : music.pause();
    }
  </script>
</body>
</html>
